<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>VietProteam Timeline</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <style>
            @font-face {
                font-display: block;
                font-family: Mori;
                font-style: normal;
                font-weight: 400;
                src: url(https://assets.codepen.io/16327/PPMori-Regular.woff)
                    format("woff");
            }

            body {
                font-family: "Mori", sans-serif;
                background-color: #f8f9fa; /* Initial background */
                overflow-x: hidden;
                transition: background-color 1s ease; /* Smooth background color transition */
            }

            .header-section {
                position: relative;
                text-align: center;
                margin: 50px auto 30px;
                color: #333;
                font-size: 2.5rem;
                font-weight: 700;
            }

            .section-divider {
                width: 80px;
                height: 4px;
                background-color: #0d6efd;
                margin: 20px auto;
            }

            #svg-container {
                position: fixed;
                left: 0;
                top: 0;
                width: 100%;
                height: 100vh;
                pointer-events: none;
                z-index: 10;
            }

            #svg-stage {
                width: 100%;
                height: 100%;
                overflow: visible;
            }

            .timeline-wrapper {
                position: relative;
                padding-top: 50vh;
                padding-bottom: 50vh;
            }
            .timeline-item {
                min-height: 85vh;
                padding: 120px 0;
                position: relative;
            }

            .timeline-content {
                transition: all 0.5s ease;
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                overflow: hidden;
                background-color: white;
                max-width: 90%;
                margin: 0 auto;
            }

            /* Better spacing for larger images */
            .timeline-item .row {
                margin-bottom: 30px;
            }

            /* Content padding adjustment */
            .timeline-content {
                padding: 25px !important;
            }

            /* Text column adjustments */
            @media (min-width: 768px) {
                .col-md-6 {
                    padding-right: 30px;
                    padding-left: 30px;
                }
            }

            .timeline-image {
                height: 500px;
                width: 100%;
                object-fit: cover;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                transition: all 0.5s ease; /* Keep this for hover effect */
            }

            .timeline-image:hover {
                transform: scale(1.03);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            }

            .ball {
                fill: #0d6efd;
                visibility: hidden;
                r: 15;
            }

            .line {
                fill: none;
                stroke: rgba(13, 110, 253, 0.3);
                stroke-width: 2px;
                stroke-dasharray: 5;
            }

            .theLine {
                stroke: #0d6efd;
                stroke-width: 4px;
            }

            text {
                fill: #333;
                font-size: 18px;
                font-weight: bold;
                visibility: hidden;
            }
            @media (max-width: 768px) {
                .timeline-item {
                    min-height: auto;
                    padding: 50px 0;
                }

                .timeline-image {
                    height: 300px;
                    margin-top: 20px;
                }
            }

            /* Vertical timeline styles */
            .verticalLine {
                stroke-dasharray: none;
                opacity: 0.8;
                filter: drop-shadow(0px 0px 5px rgba(13, 110, 253, 0.3));
            }

            .timepoint {
                filter: drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.2));
                transition: all 0.3s ease;
            }

            .activeMarker {
                filter: drop-shadow(0px 3px 5px rgba(0, 0, 0, 0.3));
                transition: all 0.5s ease;
                z-index: 10; /* Ensure it appears above the line */
            }

            /* Style for both elements to ensure alignment */
            .verticalLine,
            .activeMarker,
            .timepoint {
                cx: 120; /* Ensure all elements have the same center x-coordinate */
            }

            .text01,
            .text02,
            .text03,
            .text04,
            .text05,
            .text06,
            .text07 {
                font-size: 18px;
                font-weight: 500;
                fill: #333;
                text-anchor: start;
                visibility: visible;
                opacity: 0.7;
                transition: all 0.3s ease;
            }

            /* Timeline item positioning relative to vertical timeline */
            .timeline-item {
                padding-left: 180px;
                position: relative;
            }

            /* Responsive adjustments for vertical timeline */
            @media (max-width: 768px) {
                .timeline-item {
                    padding-left: 100px;
                }

                .verticalLine {
                    stroke-width: 4px;
                }

                .timepoint {
                    r: 8;
                }
            }

            /* Celebration particles animation */
            @keyframes float-up {
                0% {
                    transform: translateY(100%);
                    opacity: 0;
                }
                10% {
                    opacity: 1;
                }
                90% {
                    opacity: 0.7;
                }
                100% {
                    transform: translateY(-1000%);
                    opacity: 0;
                }
            }

            .celebrate-particles::before,
            .celebrate-particles::after {
                content: "";
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                background: radial-gradient(
                        circle at 20% 80%,
                        #ff5252 1px,
                        transparent 5px
                    ),
                    radial-gradient(
                        circle at 80% 60%,
                        #0d6efd 1px,
                        transparent 5px
                    ),
                    radial-gradient(
                        circle at 40% 70%,
                        #ffcc00 1px,
                        transparent 5px
                    ),
                    radial-gradient(
                        circle at 60% 90%,
                        #ff5252 1px,
                        transparent 5px
                    ),
                    radial-gradient(
                        circle at 30% 65%,
                        #0d6efd 1px,
                        transparent 5px
                    ),
                    radial-gradient(
                        circle at 70% 85%,
                        #ffcc00 1px,
                        transparent 5px
                    ),
                    radial-gradient(
                        circle at 50% 75%,
                        #ff5252 1px,
                        transparent 5px
                    );
                background-repeat: repeat-y;
                background-size: 150% 150%;
                opacity: 0.7;
                animation: float-up 15s linear infinite;
            }

            .celebrate-particles::after {
                background-position: 30% 40%;
                animation-delay: -7.5s;
                animation-duration: 17s;
                opacity: 0.5;
            }

            /* Enhanced timepoint transitions */
            .timepoint {
                transition: fill 0.5s ease, r 0.5s ease, transform 0.5s ease;
            }

            /* Enhanced text transitions */
            .text01,
            .text02,
            .text03,
            .text04,
            .text05,
            .text06,
            .text07 {
                transition: fill 0.5s ease, opacity 0.5s ease,
                    transform 0.5s ease, font-weight 0.5s ease;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1 class="header-section">
                Hành trình Phát triển của VietProteam
            </h1>
            <div class="section-divider"></div>
            <p class="text-center mb-5">Từ Khởi nghiệp đến Đối tác Toàn diện</p>
        </div>

        <div id="svg-container">
            <svg
                id="svg-stage"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 1920 1080"
            >
                <path
                    class="verticalLine"
                    d="M 120 100 L 120 800"
                    fill="none"
                    stroke="#0d6efd"
                    stroke-width="6px"
                    stroke-linecap="round"
                ></path>

                <circle
                    class="timepoint"
                    cx="120"
                    cy="150"
                    r="12"
                    fill="#0d6efd"
                ></circle>
                <text class="text01" x="150" y="155" font-weight="bold">
                    2018
                </text>

                <circle
                    class="timepoint"
                    cx="120"
                    cy="250"
                    r="12"
                    fill="#0d6efd"
                ></circle>
                <text class="text02" x="150" y="255" font-weight="bold">
                    2019
                </text>

                <circle
                    class="timepoint"
                    cx="120"
                    cy="350"
                    r="12"
                    fill="#0d6efd"
                ></circle>
                <text class="text03" x="150" y="355" font-weight="bold">
                    2020
                </text>

                <circle
                    class="timepoint"
                    cx="120"
                    cy="450"
                    r="12"
                    fill="#0d6efd"
                ></circle>
                <text class="text04" x="150" y="455" font-weight="bold">
                    2021
                </text>

                <circle
                    class="timepoint"
                    cx="120"
                    cy="550"
                    r="12"
                    fill="#0d6efd"
                ></circle>
                <text class="text05" x="150" y="555" font-weight="bold">
                    2022
                </text>

                <circle
                    class="timepoint"
                    cx="120"
                    cy="650"
                    r="12"
                    fill="#0d6efd"
                ></circle>
                <text class="text06" x="150" y="655" font-weight="bold">
                    2023
                </text>

                <circle
                    class="timepoint"
                    cx="120"
                    cy="750"
                    r="12"
                    fill="#0d6efd"
                ></circle>
                <text class="text07" x="150" y="755" font-weight="bold">
                    2025
                </text>
            </svg>
        </div>

        <div class="timeline-wrapper">
            <div class="container">
                <div class="timeline-item" data-year="2018">
                    <div class="row align-items-center">
                        <div class="col-md-5">
                            <div class="timeline-content p-4">
                                <div class="year mb-3">2018</div>
                                <h3 class="h4 mb-3">
                                    Khởi nghiệp & Đặt nền móng vững chắc
                                </h3>
                                <p class="text-muted">
                                    VietProteam ra đời, đặt nền móng vững chắc
                                    với đội ngũ chuyên gia lập trình và
                                    marketing giàu kinh nghiệm. Chúng tôi đã
                                    nhanh chóng khẳng định năng lực qua việc
                                    triển khai thành công hàng trăm dự án đa
                                    dạng cho các doanh nghiệp vừa và nhỏ.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="p-3">
                                <img
                                    src="images/khoi_nghiep.jpeg"
                                    alt="2018 - Khởi nghiệp"
                                    class="timeline-image"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item" data-year="2019">
                    <div class="row align-items-center">
                        <div class="col-md-5 order-md-2">
                            <div class="timeline-content p-4">
                                <div class="year mb-3">2019</div>
                                <h3 class="h4 mb-3">
                                    Mở rộng dịch vụ & Nâng cao chuyên môn
                                </h3>
                                <p class="text-muted">
                                    Mở rộng các gói dịch vụ và nâng cao năng lực
                                    chuyên môn. Bắt đầu cung cấp các giải pháp
                                    phức tạp như phần mềm quản lý tùy chỉnh và
                                    các chiến dịch marketing tích hợp.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-7 order-md-1">
                            <div class="p-3">
                                <img
                                    src="images/mo_rong_dich_vu.webp"
                                    alt="2019 - Mở rộng dịch vụ"
                                    class="timeline-image"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item" data-year="2020">
                    <div class="row align-items-center">
                        <div class="col-md-5">
                            <div class="timeline-content p-4">
                                <div class="year mb-3">2020</div>
                                <h3 class="h4 mb-3">
                                    Thích ứng & Vượt qua thách thức
                                </h3>
                                <p class="text-muted">
                                    Chứng tỏ khả năng thích ứng nhanh chóng và
                                    linh hoạt. Tập trung vào việc tối ưu hóa quy
                                    trình làm việc từ xa và đẩy mạnh các giải
                                    pháp công nghệ giúp doanh nghiệp chuyển đổi
                                    số.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="p-3">
                                <img
                                    src="images/vuot_qua_thu_thach.webp"
                                    alt="2020 - Vượt qua thách thức"
                                    class="timeline-image"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item" data-year="2021">
                    <div class="row align-items-center">
                        <div class="col-md-5 order-md-2">
                            <div class="timeline-content p-4">
                                <div class="year mb-3">2021</div>
                                <h3 class="h4 mb-3">
                                    Nâng cao chất lượng & Chuẩn bị cho kỷ nguyên
                                    số mới
                                </h3>
                                <p class="text-muted">
                                    Tập trung nâng cao chất lượng dịch vụ và sản
                                    phẩm. Đầu tư mạnh vào nghiên cứu và ứng dụng
                                    các công nghệ mới nổi như Big Data và tối ưu
                                    hóa UX/UI.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-7 order-md-1">
                            <div class="p-3">
                                <img
                                    src="images/nang_cao_chat_luong.jpeg"
                                    alt="2021 - Nâng cao chất lượng"
                                    class="timeline-image"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item" data-year="2022">
                    <div class="row align-items-center">
                        <div class="col-md-5">
                            <div class="timeline-content p-4">
                                <div class="year mb-3">2022</div>
                                <h3 class="h4 mb-3">
                                    Bước đột phá chiến lược với VietProteam
                                    Agency
                                </h3>
                                <p class="text-muted">
                                    Ra mắt VietProteam Agency chuyên biệt hóa
                                    vào các dịch vụ Digital Marketing toàn diện,
                                    với đội ngũ chuyên gia sáng tạo và chiến
                                    lược gia tài năng.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="p-3">
                                <img
                                    src="images/vietproteam.webp"
                                    alt="2022 - VietProteam Agency"
                                    class="timeline-image"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item" data-year="2023">
                    <div class="row align-items-center">
                        <div class="col-md-5 order-md-2">
                            <div class="timeline-content p-4">
                                <div class="year mb-3">2023</div>
                                <h3 class="h4 mb-3">
                                    Tiên phong ứng dụng công nghệ với
                                    VietProteam AIoT
                                </h3>
                                <p class="text-muted">
                                    Thành lập VietProteam AIoT, tiên phong trong
                                    nghiên cứu và ứng dụng Trí tuệ Nhân tạo (AI)
                                    và Internet of Things (IoT). Phát triển các
                                    giải pháp thông minh giúp doanh nghiệp tự
                                    động hóa và tối ưu hóa.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-7 order-md-1">
                            <div class="p-3">
                                <img
                                    src="images/ai_iot.webp"
                                    alt="2023 - VietProteam AIoT"
                                    class="timeline-image"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item" data-year="2025">
                    <div class="row align-items-center">
                        <div class="col-md-4">
                            <div class="timeline-content p-5">
                                <div class="year mb-3">2025</div>
                                <h3 class="h4 mb-3">
                                    Mở rộng quy mô & Định vị thương hiệu với CSA
                                    Vietnam
                                </h3>
                                <p class="text-muted">
                                    VietProteam chính thức trở thành CSA
                                    Vietnam, tích hợp và nâng tầm các giải pháp
                                    marketing số, công nghệ, và dịch vụ tư vấn
                                    nhân sự, hướng tới trở thành đối tác chiến
                                    lược toàn diện.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="p-3">
                                <img
                                    src="images/vuot_qua_thu_thach_2.jpeg"
                                    alt="2025 - CSA Vietnam"
                                    class="timeline-image"
                                />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollToPlugin.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/DrawSVGPlugin.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/MotionPathPlugin.min.js"></script>

        <script>
            // Register GSAP plugins
            gsap.registerPlugin(ScrollTrigger, DrawSVGPlugin, MotionPathPlugin);

            // Establish default animation settings
            gsap.defaults({
                ease: "power2.out",
                duration: 0.8,
                overwrite: "auto", // Better handling of overlapping animations
            });

            // Wait for DOM to be fully loaded
            document.addEventListener("DOMContentLoaded", function () {
                // Show years and animate text with improved transitions
                const textTimeline = gsap.timeline({
                    scrollTrigger: {
                        trigger: ".timeline-wrapper",
                        start: "top 80%",
                        end: "bottom 80%",
                        scrub: 0.5, // Smoother scrubbing
                        toggleActions: "play none none reverse", // Better control
                    },
                });

                // Create a staggered reveal animation for the year labels
                textTimeline
                    .fromTo(
                        ".text01",
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.2 },
                        0
                    )
                    .fromTo(
                        ".text02",
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.2 },
                        0.1
                    )
                    .fromTo(
                        ".text03",
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.2 },
                        0.2
                    )
                    .fromTo(
                        ".text04",
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.2 },
                        0.3
                    )
                    .fromTo(
                        ".text05",
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.2 },
                        0.4
                    )
                    .fromTo(
                        ".text06",
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.2 },
                        0.5
                    )
                    .fromTo(
                        ".text07",
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.2 },
                        0.6
                    ); // Enhanced animation for line drawing and marker movement
                const mainTimeline = gsap.timeline({
                    scrollTrigger: {
                        trigger: ".timeline-wrapper",
                        start: "top center",
                        end: "bottom center",
                        scrub: 0.6, // Smoother scrubbing for better motion
                        pin: "#svg-container",
                        pinSpacing: false,
                        anticipatePin: 1, // Smoother pinning
                    },
                });

                // Create a more dramatic reveal for the vertical line
                mainTimeline
                    // Animate the marker with a custom bounce effect
                    .fromTo(
                        ".activeMarker",
                        { autoAlpha: 0, scale: 0.5 },
                        {
                            autoAlpha: 1,
                            scale: 1,
                            duration: 0.4,
                            ease: "back.out(1.7)",
                        },
                        0
                    )
                    // Animate the line drawing with eased timing
                    .from(
                        ".verticalLine",
                        { drawSVG: "0%", duration: 0.8, ease: "power2.inOut" },
                        0
                    )
                    // Smooth movement of the active marker along the timeline
                    .to(
                        ".activeMarker",
                        {
                            cy: 750, // Move from first (2018) to last point (2025)
                            cx: 120, // Maintain alignment with the vertical line
                            duration: 1,
                            ease: "power1.inOut", // Smoother movement
                            clearProps: "scale", // Prevent scale from persisting
                        },
                        0
                    ); // Get all timeline items
                const timelineItems =
                    document.querySelectorAll(".timeline-item");

                // Preload images for smoother transitions
                const preloadImages = () => {
                    const images = document.querySelectorAll(".timeline-image");
                    images.forEach((img) => {
                        if (img.src) {
                            const preloadLink = document.createElement("link");
                            preloadLink.href = img.src;
                            preloadLink.rel = "preload";
                            preloadLink.as = "image";
                            document.head.appendChild(preloadLink);
                        }
                    });
                };
                preloadImages();

                // Process each timeline item with enhanced animations
                timelineItems.forEach((item, index) => {
                    const year = item.getAttribute("data-year");
                    const content = item.querySelector(".timeline-content");
                    const image = item.querySelector(".timeline-image");
                    const children = content ? content.children : [];

                    // Set initial states with more dynamic properties
                    gsap.set(content, {
                        opacity: 0,
                        y: 60,
                        rotateX: "10deg", // Add subtle 3D effect
                        transformOrigin: "center bottom",
                    });

                    gsap.set(image, {
                        opacity: 0,
                        y: 60,
                        scale: 0.92, // Start slightly smaller
                        transformOrigin: "center center",
                    });

                    // Create staggered animation for content children
                    if (children.length) {
                        gsap.set(children, { opacity: 0, y: 20 });
                    }

                    ScrollTrigger.create({
                        trigger: item,
                        start: "top 70%",
                        end: "bottom 30%",
                        toggleClass: { targets: item, className: "active" },
                        onEnter: () => {
                            // Create a timeline for this section's animations
                            const tl = gsap.timeline({
                                defaults: { ease: "power3.out", duration: 0.8 },
                            });

                            // Animate content with 3D effect
                            tl.to(content, {
                                opacity: 1,
                                y: 0,
                                rotateX: "0deg",
                                clearProps: "transform", // Clean up transforms after animation
                                ease: "power2.out",
                            });

                            // Animate image with subtle zoom
                            tl.to(
                                image,
                                {
                                    opacity: 1,
                                    y: 0,
                                    scale: 1,
                                    duration: 1.2,
                                    ease: "power2.out",
                                },
                                "-=0.6"
                            ); // Overlap with content animation

                            // Stagger animate content children
                            if (children.length) {
                                tl.to(
                                    children,
                                    {
                                        opacity: 1,
                                        y: 0,
                                        duration: 0.5,
                                        stagger: 0.1, // Staggered effect
                                        ease: "back.out(1.2)",
                                    },
                                    "-=0.8"
                                ); // Overlap with previous animations
                            }

                            // Enhanced highlight for the year in the SVG
                            gsap.to(`.text0${index + 1}`, {
                                fontWeight: "bold",
                                fill: "#0d6efd",
                                scale: 1.2,
                                opacity: 1,
                                transformOrigin: "left center",
                                duration: 0.4,
                                ease: "back.out(1.7)", // Bouncy effect
                            });

                            // Enhanced timepoint highlight with pulse effect
                            const timepoint = document.querySelector(
                                `.timepoint:nth-child(${index * 2 + 2})`
                            );
                            if (timepoint) {
                                // Initial highlight
                                gsap.to(timepoint, {
                                    fill: "#ff5252",
                                    r: 14,
                                    duration: 0.3,
                                    ease: "power2.inOut",
                                });

                                // Add subtle pulse effect
                                gsap.fromTo(
                                    timepoint,
                                    { scale: 1 },
                                    {
                                        scale: 1.1,
                                        repeat: 1,
                                        yoyo: true,
                                        duration: 0.5,
                                        ease: "power1.inOut",
                                    }
                                );
                            } // Move the active marker to current position with spring effect
                            gsap.to(".activeMarker", {
                                cy: 150 + index * 100,
                                cx: 120,
                                duration: 0.7,
                                ease: "elastic.out(1, 0.75)", // Spring effect for smoother movement
                                onComplete: () => {
                                    // Add subtle pulse effect after reaching position
                                    gsap.fromTo(
                                        ".activeMarker",
                                        { scale: 1 },
                                        {
                                            scale: 1.15,
                                            duration: 0.3,
                                            yoyo: true,
                                            repeat: 1,
                                            ease: "power1.inOut",
                                        }
                                    );
                                },
                            });
                        },
                        onLeaveBack: () => {
                            // Create a timeline for smoother reverse animations
                            const reverseTl = gsap.timeline({
                                defaults: { duration: 0.4 },
                            });

                            // Animate content and image back to initial state with more finesse
                            if (content)
                                reverseTl.to(content, {
                                    opacity: 0,
                                    y: 30,
                                    rotateX: "5deg",
                                    ease: "power2.in",
                                });

                            if (image)
                                reverseTl.to(
                                    image,
                                    {
                                        opacity: 0,
                                        y: 30,
                                        scale: 0.95,
                                        ease: "power2.in",
                                    },
                                    "-=0.3"
                                );

                            // Animate children if present
                            if (children && children.length) {
                                reverseTl.to(
                                    children,
                                    {
                                        opacity: 0,
                                        y: 10,
                                        stagger: 0.05,
                                        ease: "power1.in",
                                    },
                                    "-=0.4"
                                );
                            }

                            // Unhighlight when scrolling back up
                            gsap.to(`.text0${index + 1}`, {
                                fontWeight: "normal",
                                fill: "#333",
                                scale: 1,
                                opacity: 0.7,
                                duration: 0.3,
                            });

                            // Restore the timepoint
                            gsap.to(`.timepoint:nth-child(${index * 2 + 2})`, {
                                fill: "#0d6efd",
                                r: 12,
                                duration: 0.3,
                            });
                        },
                        // For smoother continuous animation on scroll
                        onLeave: () => {
                            // Animate content and image out when scrolling down past the item
                            gsap.to([content, image], {
                                opacity: 0,
                                y: -50, // Move upwards when leaving downwards
                                duration: 0.5,
                                ease: "power2.in",
                            });

                            // Unhighlight when leaving downwards
                            gsap.to(`.text0${index + 1}`, {
                                fontWeight: "normal",
                                fill: "#333",
                                scale: 1,
                                opacity: 0.7,
                                duration: 0.3,
                            });

                            // Restore the timepoint
                            gsap.to(`.timepoint:nth-child(${index * 2 + 2})`, {
                                fill: "#0d6efd",
                                r: 12,
                                duration: 0.3,
                            });
                        },
                        onEnterBack: () => {
                            // Animate content and image back in when scrolling back into view from below
                            gsap.to(content, {
                                opacity: 1,
                                y: 0,
                                duration: 0.8,
                                ease: "power3.out",
                            });
                            gsap.to(image, {
                                opacity: 1,
                                y: 0,
                                duration: 0.8,
                                delay: 0.2,
                                ease: "power3.out",
                            });

                            // Highlight the current year in the SVG
                            gsap.to(`.text0${index + 1}`, {
                                fontWeight: "bold",
                                fill: "#0d6efd",
                                scale: 1.2,
                                opacity: 1,
                                transformOrigin: "left center",
                                duration: 0.3,
                            });

                            // Highlight the current timepoint
                            gsap.to(`.timepoint:nth-child(${index * 2 + 2})`, {
                                fill: "#ff5252",
                                r: 14,
                                duration: 0.3,
                            });

                            // Move the active marker to current position
                            gsap.to(".activeMarker", {
                                cy: 150 + index * 100,
                                cx: 120,
                                duration: 0.5,
                                ease: "power2.out",
                            });
                        },
                    });
                }); // Add special handling for the 2025 section with dramatic effects
                ScrollTrigger.create({
                    trigger: ".timeline-item[data-year='2025']",
                    start: "top 70%",
                    onEnter: () => {
                        // Create a timeline for coordinated animations
                        const tl2025 = gsap.timeline();

                        // Make the 2025 marker more prominent with a revealing animation
                        tl2025.to(".text07", {
                            fontWeight: "bold",
                            fill: "#ff5252",
                            scale: 1.4,
                            opacity: 1,
                            duration: 0.6,
                            ease: "power2.out",
                            textShadow: "0px 0px 5px rgba(255,82,82,0.7)", // Glow effect
                        });

                        // Make the final point more prominent with pulsing effect
                        tl2025.to(
                            ".timepoint:last-of-type",
                            {
                                r: 18,
                                fill: "#ff5252",
                                duration: 0.5,
                                ease: "back.out(1.7)",
                                stroke: "#fff",
                                strokeWidth: 2,
                                onComplete: () => {
                                    // Add pulsing animation after reaching final size
                                    gsap.to(".timepoint:last-of-type", {
                                        scale: 1.2,
                                        repeat: 3,
                                        yoyo: true,
                                        duration: 0.5,
                                        ease: "sine.inOut",
                                    });
                                },
                            },
                            "-=0.3"
                        );

                        // Ensure active marker reaches the end with dramatic finish
                        tl2025.to(
                            ".activeMarker",
                            {
                                cy: 750,
                                cx: 120,
                                scale: 1.3,
                                duration: 0.8,
                                ease: "back.out(1.2)", // Overshoot slightly for emphasis
                                stroke: "#fff",
                                strokeWidth: 4,
                                fill: "#ff5252",
                                onComplete: () => {
                                    // Create celebration effect
                                    gsap.to(".activeMarker", {
                                        scale: 1.5,
                                        duration: 0.5,
                                        repeat: 1,
                                        yoyo: true,
                                        ease: "elastic.out(1, 0.3)",
                                    });

                                    // Optional: Add subtle background flash for emphasis
                                    const flash = document.createElement("div");
                                    flash.style.position = "fixed";
                                    flash.style.top = "0";
                                    flash.style.left = "0";
                                    flash.style.width = "100%";
                                    flash.style.height = "100%";
                                    flash.style.backgroundColor =
                                        "rgba(255,82,82,0.05)";
                                    flash.style.pointerEvents = "none";
                                    flash.style.zIndex = "5";
                                    document.body.appendChild(flash);

                                    gsap.to(flash, {
                                        opacity: 0,
                                        duration: 1,
                                        onComplete: () =>
                                            document.body.removeChild(flash),
                                    });
                                },
                            },
                            "-=0.2"
                        );
                    },
                }); // Enhanced background transitions for immersive experience

                // Create a gradient overlay element for more dynamic background effects
                const gradientOverlay = document.createElement("div");
                gradientOverlay.style.position = "fixed";
                gradientOverlay.style.top = "0";
                gradientOverlay.style.left = "0";
                gradientOverlay.style.width = "100%";
                gradientOverlay.style.height = "100%";
                gradientOverlay.style.pointerEvents = "none";
                gradientOverlay.style.opacity = "0";
                gradientOverlay.style.zIndex = "1";
                gradientOverlay.style.mixBlendMode = "overlay";
                document.body.appendChild(gradientOverlay);

                // Background transitions with richer colors
                gsap.to("body", {
                    backgroundColor: "#e6eef7", // Soft blue for 2019
                    backgroundImage:
                        "linear-gradient(to bottom right, #e6eef7, #d9e6f3)",
                    scrollTrigger: {
                        trigger: ".timeline-item[data-year='2019']",
                        start: "top bottom",
                        end: "bottom top",
                        scrub: 0.7,
                    },
                });

                // Subtle radial gradient for 2019
                gsap.to(gradientOverlay, {
                    opacity: 0.2,
                    background:
                        "radial-gradient(circle at 70% 30%, rgba(173,216,230,0.3), transparent 70%)",
                    scrollTrigger: {
                        trigger: ".timeline-item[data-year='2019']",
                        start: "top 50%",
                        end: "bottom 20%",
                        scrub: true,
                    },
                });

                gsap.to("body", {
                    backgroundColor: "#d2e0f0", // Deeper blue for 2021
                    backgroundImage:
                        "linear-gradient(to bottom right, #d2e0f0, #c4d8ed)",
                    scrollTrigger: {
                        trigger: ".timeline-item[data-year='2021']",
                        start: "top bottom",
                        end: "bottom top",
                        scrub: 0.7,
                    },
                });

                // Different gradient for 2021
                gsap.to(gradientOverlay, {
                    opacity: 0.25,
                    background:
                        "radial-gradient(circle at 30% 70%, rgba(100,149,237,0.25), transparent 60%)",
                    scrollTrigger: {
                        trigger: ".timeline-item[data-year='2021']",
                        start: "top 50%",
                        end: "bottom 20%",
                        scrub: true,
                    },
                });

                gsap.to("body", {
                    backgroundColor: "#c0d4e9", // Even deeper blue for 2023
                    backgroundImage:
                        "linear-gradient(to bottom right, #c0d4e9, #b3cce6)",
                    scrollTrigger: {
                        trigger: ".timeline-item[data-year='2023']",
                        start: "top bottom",
                        end: "bottom top",
                        scrub: 0.7,
                    },
                });

                // Special treatment for 2025 - create a more dramatic finish
                gsap.to("body", {
                    backgroundColor: "#a7c5e3", // Final blue with hint of achievement
                    backgroundImage:
                        "linear-gradient(to bottom right, #a7c5e3, #9abedf)",
                    scrollTrigger: {
                        trigger: ".timeline-item[data-year='2025']",
                        start: "top bottom",
                        end: "bottom top",
                        scrub: 0.7,
                    },
                });

                // Special gradient for 2025
                gsap.to(gradientOverlay, {
                    opacity: 0.35,
                    background:
                        "radial-gradient(circle at 50% 50%, rgba(70,130,220,0.3), transparent 70%)",
                    scrollTrigger: {
                        trigger: ".timeline-item[data-year='2025']",
                        start: "top 50%",
                        end: "bottom 20%",
                        scrub: true,
                        onEnter: () => {
                            // Add subtle particles when reaching 2025
                            if (window.innerWidth > 768) {
                                // Only on desktop
                                const particle = document.createElement("div");
                                particle.className = "celebrate-particles";
                                particle.style.position = "fixed";
                                particle.style.top = "0";
                                particle.style.left = "0";
                                particle.style.width = "100%";
                                particle.style.height = "100%";
                                particle.style.pointerEvents = "none";
                                particle.style.zIndex = "2";
                                particle.style.opacity = "0";
                                document.body.appendChild(particle);

                                gsap.to(particle, {
                                    opacity: 1,
                                    duration: 1,
                                    onComplete: () => {
                                        setTimeout(() => {
                                            gsap.to(particle, {
                                                opacity: 0,
                                                duration: 2,
                                                onComplete: () =>
                                                    document.body.removeChild(
                                                        particle
                                                    ),
                                            });
                                        }, 4000);
                                    },
                                });
                            }
                        },
                    },
                });
            });
        </script>
    </body>
</html>
